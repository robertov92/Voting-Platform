(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,a){e.exports=a(33)},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=a(8),s=a(1),u=a(6);var i=a(7),m=a.n(i),p=a(10);function b(e){var t=e.children,a=e.onClick;return r.a.createElement("button",{onClick:a,className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out"},t)}var d=a(17);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"w-full h-screen"},r.a.createElement("div",{className:"h-16 w-full bg-gray-800 flex items-center"},r.a.createElement("div",{className:"container mx-auto px-5"},r.a.createElement(o.b,{to:"/",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 mr-3"},"Home"),r.a.createElement(o.b,{to:"/polls/create",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 mr-3"},"Create Poll"))),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("polls"))||[];l(e)}),[]),r.a.createElement("div",{className:"container mx-auto px-5"},r.a.createElement("h1",{className:"text-5xl text-center my-10"},"Welcome to the Voting Platform"),r.a.createElement("div",{className:"w-full max-w-3xl mx-auto bg-white shadow"},a.map((function(e){return r.a.createElement("div",{key:e.id,className:"w-full px-4 py-4 border-b border-gray-400 flex justify-between"},e.title,r.a.createElement(o.b,{className:"cursor-pointer hover:text-blue-600 text-blue-500",to:"/polls/".concat(e.id)},"View poll"))}))))}}),r.a.createElement(s.a,{path:"/polls/create",component:function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([""]),s=Object(u.a)(c,2),i=s[0],b=s[1],f=Object(n.useState)([]),x=Object(u.a)(f,2),h=x[0],v=x[1],E=Object(n.useState)({}),y=Object(u.a)(E,2),g=y[0],w=y[1],N=function(e){var t=JSON.parse(localStorage.getItem("polls"))||[],n=[].concat(Object(d.a)(t),[{title:a,id:e.pollId}]);localStorage.setItem("polls",JSON.stringify(n))},O=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.97.6.204:4000/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,choices:i})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=9;break}return v(n),e.abrupt("return");case 9:w(n),N(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mx-auto my-16 md:my-32 px-6 "},r.a.createElement("div",{className:"w-full max-w-3xl mx-auto rounded shadow-md bg-white"},r.a.createElement("header",{className:"border-b border-gray-400 px-8 py-5 text-gray-800"},"Create poll"),g.pollId?r.a.createElement("div",{className:"py-5 px-8"},r.a.createElement("div",{className:"w-full mb-2 bg-green-100 text-green-500 border border-green-500 rounded py-3 px-2"},"Poll created successfully. ",r.a.createElement(o.b,{to:"/polls/".concat(g.pollId)},Object({NODE_ENV:"production",PUBLIC_URL:"/Voting-Platform",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_APP_URL,"/polls/",g.pollId))):null,g.pollId?null:r.a.createElement("div",{className:"py-5 px-8"},h.length>0?r.a.createElement(n.Fragment,null,h.map((function(e,t){return r.a.createElement("p",{key:t,className:"w-full mb-2 bg-red-500 text-white py-3 px-2 rounded"},e.message)}))):null,r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{htmlFor:"title",className:"text-sm mb-2 inline-block"},"Enter the title of the poll"),r.a.createElement("input",{onChange:function(e){return l(e.target.value)},value:a,name:"title",id:"title",type:"text",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{className:"text-sm mb-2 inline-block"},"Enter all the possible answers for this poll"),i.map((function(e,t){return r.a.createElement("div",{key:t,className:"w-full flex items-center mb-2"},r.a.createElement("input",{onChange:function(e){return function(e,t){var a=i.map((function(a,n){return n===e?t:a}));b(a)}(t,e.target.value)},key:t,type:"text",value:e,className:"w-full py-2 border border-gray-400 rounded px-4"}),r.a.createElement("button",{onClick:function(){return function(e){var t=i.filter((function(t,a){return a!==e}));b(t)}(t)},className:"py-2 ml-2 px-3 bg-red-500 text-white rounded hover:bg-red-600"},"Remove"))}))),r.a.createElement("button",{onClick:function(){b([].concat(Object(d.a)(i),[""]))},className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out"},"Add choice"),r.a.createElement("div",{className:"mt-12 mb-6 text-center"},r.a.createElement("button",{onClick:O,className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out"},"Create Poll")))))}}),r.a.createElement(s.a,{path:"/polls/:poll",component:function(e){var t=e.match,a=Object(n.useState)(null),l=Object(u.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(null),i=Object(u.a)(s,2),d=i[0],f=i[1],x=Object(n.useState)(!1),h=Object(u.a)(x,2),v=h[0],E=h[1],y=function(){var e=Object(p.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.97.6.204:4000/polls/".concat(t.params.poll));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,f(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.ipify.org?format=json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,o(a.ip);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[v]),Object(n.useEffect)((function(){g()}),[]);var w=function(){var e=Object(p.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c),console.log(a),e.next=4,fetch("http://3.97.6.204:4000/polls/".concat(t.params.poll),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:c,choice:a})});case 4:E(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=0;return d.choices.forEach((function(t){e+=t.count})),e};return r.a.createElement("div",{className:"container mx-auto mt-16 px-5"},r.a.createElement("h1",{className:"my-5 text-3xl text-center"},"Welcome to the Voting Platform"),d?r.a.createElement("div",{className:"w-full max-w-3xl mx-auto bg-white shadow"},r.a.createElement("header",{className:"px-5 py-4 flex justify-between items-center"},d.title,v&&r.a.createElement("span",null,N()," votes"),r.a.createElement(b,{onClick:function(){return E(!0)}},"View results")),d.choices.map((function(e){return r.a.createElement("div",{className:"px-5 py-4 border-t border-gray-400 flex justify-between items-center",key:e._id},e.name,v?r.a.createElement("span",{className:"text-blue-500"}," ",function(e){var t=N();return 0===t?0:Math.round(e.count/t*100)}(e),"% "):r.a.createElement(b,{onClick:function(){return w(e._id)}},"Vote"))}))):null)}}))))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c38bc5c3.chunk.js.map